<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞èÈöäÊà∞È¨•ÁÆ°ÁêÜÁ≥ªÁµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            padding: 20px;
            overflow-x: hidden;
        }

        /* È†ÅÈù¢ÂàáÊèõÊåâÈàï */
        .page-switch {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .switch-btn {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .switch-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .switch-btn.active {
            background: linear-gradient(45deg, #00ff88 0%, #00cc6a 100%);
            text-shadow: 0 0 10px #fff;
        }

        /* È†ÅÈù¢ÂÆπÂô® */
        .page {
            display: none;
            width: 100%;
        }

        .page.active {
            display: block;
        }

        /* Êà∞È¨•ÊéßÂà∂Èù¢Êùø */
        .battle-controls {
            position: fixed;
            top: 80px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            z-index: 999;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
            max-height: 80vh;
            overflow-y: auto;
        }

        .battle-title {
            color: #00ff88;
            font-size: 1.3em;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 0 0 10px #00ff88;
        }

        .squad-selector {
            margin-bottom: 15px;
        }

        .squad-selector label {
            color: #ffd700;
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .squad-checkboxes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .squad-checkbox {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .squad-checkbox:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .squad-checkbox.selected {
            background: rgba(0, 255, 136, 0.3);
            border-color: #00ff88;
        }

        .squad-checkbox.no-attacks {
            background: rgba(255, 71, 87, 0.2);
            border-color: #ff4757;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .squad-checkbox.no-attacks .squad-label {
            color: #ff4757;
        }

        .squad-checkbox input {
            display: none;
        }

        .squad-label {
            color: #fff;
            font-size: 0.9em;
            margin-bottom: 4px;
            font-weight: bold;
        }

        .squad-points {
            color: #ffd700;
            font-size: 0.8em;
            font-weight: bold;
        }

        .squad-attacks {
            color: #ff6b6b;
            font-size: 0.7em;
            font-weight: bold;
            margin-top: 2px;
        }

        .target-selector {
            margin-bottom: 15px;
        }

        .alien-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
        }

        .alien-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #666;
            color: #fff;
            padding: 8px 4px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .alien-btn:hover {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.2);
        }

        .alien-btn.selected {
            border-color: #ff4757;
            background: rgba(255, 71, 87, 0.3);
            color: #ff4757;
        }

        .alien-btn-text {
            font-size: 0.6em;
            color: #ccc;
        }

        .attack-btn {
            width: 100%;
            background: linear-gradient(45deg, #ff4757 0%, #ff3742 100%);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .attack-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.5);
        }

        .attack-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #666;
        }

        .battle-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #fff;
        }

        /* Ë°ÄÈáèË™øÊï¥Â∑•ÂÖ∑Ê®£Âºè */
        .hp-adjustment-tool, .attack-count-tool, .points-adjustment-tool, .squad-points-tool {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .hp-adjustment-tool {
            border: 1px solid #ff6b6b;
        }

        .attack-count-tool {
            border: 1px solid #9b59b6;
        }

        .points-adjustment-tool {
            border: 1px solid #ffd700;
        }

        .squad-points-tool {
            border: 1px solid #00ffff;
        }

        .tool-title {
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }

        .hp-adjustment-tool .tool-title {
            color: #ff6b6b;
            text-shadow: 0 0 10px #ff6b6b;
        }

        .attack-count-tool .tool-title {
            color: #9b59b6;
            text-shadow: 0 0 10px #9b59b6;
        }

        .points-adjustment-tool .tool-title {
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700;
        }

        .squad-points-tool .tool-title {
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }

        .hp-controls, .points-controls, .attack-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .hp-controls label, .points-controls label, .attack-controls label {
            color: #ffd700;
            font-size: 0.9em;
            font-weight: bold;
        }

        .alien-select, .hp-value-input, .points-value-input, .squad-select, .attack-count-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #666;
            border-radius: 5px;
            color: #fff;
            padding: 8px;
            font-size: 0.9em;
        }

        .alien-select:focus, .hp-value-input:focus, .points-value-input:focus, .squad-select:focus, .attack-count-input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.5);
        }

        .hp-set-btn, .points-set-btn, .attack-set-btn {
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .hp-set-btn {
            background: linear-gradient(45deg, #ff6b6b 0%, #ff5252 100%);
        }

        .points-set-btn {
            background: linear-gradient(45deg, #ffd700 0%, #ffcc02 100%);
            color: #000;
        }

        .attack-set-btn {
            background: linear-gradient(45deg, #9b59b6 0%, #8e44ad 100%);
        }

        .hp-set-btn:hover, .points-set-btn:hover, .attack-set-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .quick-hp-buttons, .quick-points-buttons, .quick-attack-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .quick-hp-btn, .quick-points-btn, .quick-attack-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid #666;
            color: #fff;
            padding: 8px 4px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .quick-hp-btn:hover, .quick-points-btn:hover, .quick-attack-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: #00ff88;
        }

        .reset-attacks-section {
            margin-top: 10px;
        }

        .reset-attacks-btn {
            width: 100%;
            background: linear-gradient(45deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .reset-attacks-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
        }

        .squad-points-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .squad-points-item {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #666;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .squad-points-item:hover {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }

        .squad-points-label {
            color: #00ffff;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .squad-points-value {
            color: #fff;
            font-size: 1.2em;
            font-weight: bold;
            text-shadow: 0 0 8px #00ffff;
        }

        .squad-points-controls {
            display: flex;
            gap: 10px;
        }

        .reset-squad-points-btn, .add-points-btn {
            flex: 1;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .reset-squad-points-btn {
            background: linear-gradient(45deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .add-points-btn {
            background: linear-gradient(45deg, #00ffff 0%, #00cccc 100%);
            color: #000;
        }

        .reset-squad-points-btn:hover, .add-points-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        /* Â∞èÈöäÁÆ°ÁêÜ‰∏≠ÁöÑÈªûÊï∏È°ØÁ§∫Âíå‰ΩøÁî® */
        .available-points {
            background: rgba(0, 255, 255, 0.2);
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .available-points .points-label {
            color: #00ffff;
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 0 0 10px #00ffff;
        }

        .points-value-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .points-value-input {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #00ffff;
            border-radius: 8px;
            color: #fff;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            width: 80px;
            padding: 5px;
            text-shadow: 0 0 10px #00ffff;
            transition: all 0.3s ease;
        }

        .points-value-input:focus {
            outline: none;
            border-color: #00ccff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
            color: #00ffff;
        }

        .points-set-button {
            background: linear-gradient(45deg, #00ffff 0%, #00cccc 100%);
            color: #000;
            border: none;
            padding: 5px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .points-set-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .point-controls {
            display: flex;
            gap: 5px;
            margin-top: 8px;
            align-items: center;
        }

        .point-btn {
            background: rgba(0, 255, 255, 0.3);
            border: 1px solid #00ffff;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 25px;
        }

        .point-btn:hover {
            background: rgba(0, 255, 255, 0.5);
            transform: scale(1.1);
        }

        .point-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .point-input {
            width: 40px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ffff;
            border-radius: 3px;
            color: #fff;
            text-align: center;
            padding: 2px;
            font-size: 0.8em;
        }

        /* Ê®ôÈ°å */
        .main-title {
            text-align: center;
            color: #00ff88;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 0 0 20px #00ff88, 0 0 40px #00ff88;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Â∞èÈöäÁÆ°ÁêÜÈ†ÅÈù¢Ê®£Âºè */
        .squads-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .squad-card {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid #00ff88;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
            transition: all 0.3s ease;
        }

        .squad-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 40px rgba(0, 255, 136, 0.5);
        }

        .squad-title {
            color: #00ff88;
            font-size: 1.5em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff88;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .squad-icon {
            font-size: 1.2em;
        }

        .attributes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .attribute {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px;
            transition: all 0.3s ease;
        }

        .attribute:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #00ff88;
        }

        .attribute-label {
            color: #ffd700;
            font-size: 0.9em;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .attribute-icon {
            font-size: 1.2em;
        }

        .attribute-input {
            width: 100%;
            background: transparent;
            border: 2px solid #666;
            border-radius: 5px;
            color: #fff;
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
            padding: 5px;
            transition: all 0.3s ease;
        }

        .attribute-input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            color: #00ff88;
        }

        .attribute-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .attribute-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757 0%, #ffa502 50%, #2ed573 100%);
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        .total-points {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            color: #00ffff;
            font-size: 1.1em;
            font-weight: bold;
        }

        .total-value {
            display: inline-block;
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid #00ffff;
            border-radius: 8px;
            padding: 8px 15px;
            margin: 0 5px;
            font-size: 1.3em;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
            min-width: 60px;
        }

        /* Êà∞Â†¥È†ÅÈù¢Ê®£Âºè */
        .battlefield {
            position: relative;
            width: calc(100% - 320px);
            min-height: 100vh;
            margin-left: 320px;
            padding-right: 20px;
        }

        .alien {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 5;
        }

        .alien:hover {
            transform: scale(1.1);
            z-index: 6;
        }

        .alien.targeted {
            z-index: 10;
        }

        .alien.targeted .alien-sprite {
            box-shadow: 0 0 50px rgba(255, 71, 87, 1), 0 0 100px rgba(255, 71, 87, 0.8);
            animation: targetPulse 1s ease-in-out infinite;
        }

        @keyframes targetPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .alien-sprite {
            width: 100px;
            height: 100px;
            border-radius: 20%;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.8), 0 0 60px rgba(0, 255, 136, 0.4);
            transition: all 0.3s ease;
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .alien:hover .alien-sprite {
            box-shadow: 0 0 40px rgba(0, 255, 136, 1), 0 0 80px rgba(0, 255, 136, 0.6);
            transform: rotate(5deg);
        }

        .hp-display {
            position: absolute;
            top: 110px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 8px 15px;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
            z-index: 5;
        }

        .points-display {
            position: absolute;
            top: 185px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid #ffd700;
            border-radius: 10px;
            padding: 4px 10px;
            min-width: 90px;
            text-align: center;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            z-index: 4;
        }

        .points-label {
            color: #ffd700;
            font-size: 0.7em;
            font-weight: bold;
            margin-bottom: 2px;
            text-shadow: 0 0 8px #ffd700;
        }

        .points-input {
            background: transparent;
            border: 1px solid #ffd700;
            border-radius: 3px;
            color: #fff;
            font-size: 0.9em;
            font-weight: bold;
            text-align: center;
            width: 60px;
            outline: none;
            padding: 1px;
            height: 22px;
        }

        .points-input:focus {
            color: #ffd700;
            text-shadow: 0 0 8px #ffd700;
            border-color: #ffed4e;
        }

        .alien-id {
            color: #00ff88;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 10px #00ff88;
        }

        .hp-input {
            background: transparent;
            border: 1px solid #00ff88;
            border-radius: 5px;
            color: #fff;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            width: 80px;
            outline: none;
            padding: 2px;
        }

        .hp-input:focus {
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88;
            border-color: #00ffff;
        }

        .hp-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .hp-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757 0%, #ffa502 50%, #2ed573 100%);
            transition: width 0.5s ease;
            border-radius: 4px;
            box-shadow: 0 0 10px currentColor;
        }

        /* Â§ñÊòü‰∫∫‰ΩçÁΩÆ */
        .alien-1 { top: 10%; left: 8%; }
        .alien-2 { top: 10%; left: 55%; }
        .alien-3 { top: 25%; left: 25%; }
        .alien-4 { top: 25%; left: 70%; }
        .alien-5 { top: 40%; left: 5%; }
        .alien-6 { top: 40%; left: 40%; }
        .alien-7 { top: 55%; left: 15%; }
        .alien-8 { top: 55%; left: 60%; }
        .alien-9 { top: 70%; left: 30%; }
        .alien-10 { top: 70%; left: 75%; }

        .alien.dead .alien-sprite {
            opacity: 0.3;
            filter: grayscale(100%);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            background-color: rgba(100, 100, 100, 0.5);
        }

        .alien.dead .hp-display {
            border-color: #ff4757;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.5);
        }

        .alien.dead .alien-id {
            color: #ff4757;
            text-shadow: 0 0 10px #ff4757;
        }

        .alien.dead .points-display {
            border-color: #ff4757;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.5);
        }

        .alien.dead .points-label {
            color: #ff4757;
            text-shadow: 0 0 10px #ff4757;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .alien {
            animation: float 4s ease-in-out infinite;
        }

        .alien:nth-child(even) {
            animation-delay: 2s;
        }

        .monster-icon {
            font-size: 60px;
        }

        /* ÊéßÂà∂ÊåâÈàï */
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            gap: 10px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        /* ÊòüÊòüËÉåÊôØ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Êà∞È¨•ÁµêÊûúÈ°ØÁ§∫ */
        .battle-result {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 3px solid #00ff88;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            text-align: center;
            z-index: 2000;
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.8);
            display: none;
        }

        .result-title {
            color: #00ff88;
            font-size: 2em;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #00ff88;
        }

        .result-content {
            color: #fff;
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .result-close {
            background: linear-gradient(45deg, #00ff88 0%, #00cc6a 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
        }

        /* ÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 1200px) {
            .battle-controls {
                width: 250px;
            }
            
            .battlefield {
                margin-left: 270px;
                width: calc(100% - 270px);
            }
            
            .alien-2 { left: 50%; }
            .alien-4 { left: 65%; }
            .alien-6 { left: 35%; }
            .alien-8 { left: 55%; }
            .alien-10 { left: 70%; }
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2em;
            }
            
            .squads-container {
                grid-template-columns: 1fr;
            }
            
            .battle-controls {
                position: static;
                width: 100%;
                margin-bottom: 20px;
            }
            
            .battlefield {
                margin-left: 0;
                width: 100%;
                padding-right: 10px;
            }
            
            .alien-1 { top: 10%; left: 5%; }
            .alien-2 { top: 10%; left: 55%; }
            .alien-3 { top: 25%; left: 30%; }
            .alien-4 { top: 25%; left: 75%; }
            .alien-5 { top: 40%; left: 5%; }
            .alien-6 { top: 40%; left: 55%; }
            .alien-7 { top: 55%; left: 30%; }
            .alien-8 { top: 55%; left: 75%; }
            .alien-9 { top: 70%; left: 15%; }
            .alien-10 { top: 70%; left: 65%; }
            
            .alien-sprite {
                width: 80px;
                height: 80px;
            }
            
            .hp-display {
                top: 90px;
                padding: 6px 12px;
                min-width: 100px;
            }

            .points-display {
                top: 155px;
            }
            
            .hp-input, .points-input {
                font-size: 1em;
                width: 70px;
            }

            .monster-icon {
                font-size: 50px;
            }
        }

        /* Á´∂ÊäÄÂ†¥È†ÅÈù¢Ê®£Âºè */
        .arena-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
            align-items: start;
        }

        /* Â∞èÈöäÈÅ∏ÊìáÂçÄÂüü */
        .squad-selector-arena {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff88;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .selector-title {
            color: #00ff88;
            font-size: 1.5em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff88;
        }

        .squad-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .squad-option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .squad-option:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #00ff88;
        }

        .squad-option.selected {
            background: rgba(0, 255, 136, 0.3);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .squad-name {
            color: #fff;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .squad-total {
            color: #ffd700;
            font-size: 1em;
            font-weight: bold;
        }

        /* Êà∞È¨•ÂçÄÂüü */
        .battle-area-arena {
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #ff4757;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 0 50px rgba(255, 71, 87, 0.5);
            min-height: 600px;
        }

        .battle-title-arena {
            color: #ff4757;
            font-size: 2em;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 15px #ff4757;
        }

        .vs-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }

        .squad-display {
            text-align: center;
            flex: 1;
        }

        .squad-display-name {
            color: #00ffff;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00ffff;
        }

        .squad-display-total {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
        }

        .vs-text {
            color: #ff4757;
            font-size: 3em;
            font-weight: bold;
            text-shadow: 0 0 20px #ff4757;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px #ff4757; }
            to { text-shadow: 0 0 30px #ff4757, 0 0 40px #ff4757; }
        }

        .battle-button-arena {
            width: 100%;
            background: linear-gradient(45deg, #ff4757 0%, #ff3742 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.3);
        }

        .battle-button-arena:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.5);
        }

        .battle-button-arena:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ÊØîËºÉÁµêÊûúÈ°ØÁ§∫ */
        .comparison-results {
            display: none;
        }

        .comparison-results.active {
            display: block;
        }

        .attribute-comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto 1fr;
            gap: 15px;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .attribute-comparison.winner {
            background: rgba(0, 255, 136, 0.2);
            border-color: #00ff88;
        }

        .attribute-name {
            color: #ffd700;
            font-weight: bold;
            text-align: center;
            font-size: 1.1em;
        }

        .attribute-value {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #666;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            color: #fff;
            font-weight: bold;
            font-size: 1.2em;
        }

        .attribute-value.winner {
            border-color: #00ff88;
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .attribute-value.loser {
            border-color: #ff4757;
            color: #ff4757;
            background: rgba(255, 71, 87, 0.1);
        }

        .vs-icon {
            color: #ff4757;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
        }

        /* ÊúÄÁµÇÁµêÊûú */
        .final-result {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(45deg, rgba(255, 71, 87, 0.2) 0%, rgba(0, 255, 136, 0.2) 100%);
            border-radius: 15px;
            border: 3px solid #ffd700;
            text-align: center;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .final-result-title {
            color: #ffd700;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 0 0 15px #ffd700;
        }

        .score-display {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .score-item {
            text-align: center;
        }

        .score-label {
            color: #00ffff;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .score-value {
            color: #fff;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 0 0 10px #fff;
        }

        .winner-announcement {
            color: #00ff88;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 0 0 20px #00ff88;
            animation: victory 1s ease-in-out infinite alternate;
        }

        @keyframes victory {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        /* ÈáçÁΩÆÊåâÈàï */
        .reset-button-arena {
            width: 100%;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .reset-button-arena:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        /* Á∏ΩËÉΩÂäõÂÄºÊØîËºÉÊ®£Âºè */
        .total-comparison {
            background: linear-gradient(45deg, rgba(255, 71, 87, 0.1) 0%, rgba(0, 255, 136, 0.1) 100%);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .total-comparison-title {
            color: #ffd700;
            font-size: 1.8em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 15px #ffd700;
        }

        .total-vs-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .total-squad-info {
            text-align: center;
            flex: 1;
        }

        .total-squad-name {
            color: #00ffff;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 0 0 10px #00ffff;
        }

        .total-value {
            font-size: 3em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 20px #fff;
            background: rgba(0, 0, 0, 0.5);
            border: 3px solid #666;
            border-radius: 15px;
            padding: 20px;
            display: inline-block;
            min-width: 120px;
        }

        .total-value.winner {
            color: #00ff88;
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.2);
            text-shadow: 0 0 25px #00ff88;
            animation: totalWinnerGlow 2s ease-in-out infinite alternate;
        }

        .total-value.loser {
            color: #ff4757;
            border-color: #ff4757;
            background: rgba(255, 71, 87, 0.2);
            opacity: 0.8;
        }

        @keyframes totalWinnerGlow {
            from { 
                box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
                transform: scale(1);
            }
            to { 
                box-shadow: 0 0 40px rgba(0, 255, 136, 0.8);
                transform: scale(1.05);
            }
        }

        .total-vs-text {
            color: #ff4757;
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 0 0 20px #ff4757;
            margin: 0 20px;
        }

        .total-difference {
            text-align: center;
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            text-shadow: 0 0 10px #ffd700;
        }

        /* Ë©≥Á¥∞Â±¨ÊÄßÊØîËºÉÊ®£Âºè */
        .attribute-details {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #666;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .details-title {
            color: #00ffff;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ffff;
        }

        .details-grid {
            display: grid;
            gap: 8px;
        }

        .detail-row {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 15px;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .detail-value {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #666;
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            color: #fff;
            font-weight: bold;
        }

        .detail-value.detail-winner {
            border-color: #00ff88;
            color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
            text-shadow: 0 0 8px #00ff88;
        }

        .detail-attr {
            color: #ffd700;
            font-weight: bold;
            text-align: center;
            font-size: 1em;
        }

        /* ÊúÄÁµÇÁµêÊûúÊ®£ÂºèË™øÊï¥ */
        .victory-details, .tie-details {
            color: #fff;
            font-size: 1.1em;
            margin-top: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            line-height: 1.6;
        }

        /* ÈüøÊáâÂºèË®≠Ë®à - Á∏ΩËÉΩÂäõÂÄºÊØîËºÉ */
        @media (max-width: 768px) {
            .total-vs-display {
                flex-direction: column;
                gap: 20px;
            }
            
            .total-vs-text {
                order: 2;
                font-size: 2em;
                margin: 10px 0;
            }
            
            .total-value {
                font-size: 2.5em;
                min-width: 100px;
                padding: 15px;
            }
            
            .detail-row {
                grid-template-columns: 1fr;
                gap: 8px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <!-- È†ÅÈù¢ÂàáÊèõÊåâÈàï -->
    <div class="page-switch">
        <button class="switch-btn active" onclick="switchPage('squads')">Â∞èÈöäÁÆ°ÁêÜ</button>
        <button class="switch-btn" onclick="switchPage('battlefield')">Êà∞Â†¥</button>
        <button class="switch-btn" onclick="switchPage('arena')">Á´∂ÊäÄÂ†¥</button>
    </div>

    <!-- Â∞èÈöäÁÆ°ÁêÜÈ†ÅÈù¢ -->
    <div class="page active" id="squads-page">
        <h1 class="main-title">üéÆ Â∞èÈöäËÉΩÂäõÂÄºÁÆ°ÁêÜÁ≥ªÁµ± üéÆ</h1>
        
        <div class="controls">
            <button class="btn" onclick="resetAllSquads()">ÈáçÁΩÆÊâÄÊúâÂ∞èÈöä</button>
            <button class="btn" onclick="randomizeAllSquads()">Èö®Ê©üÂ±¨ÊÄß</button>
            <button class="btn" onclick="showStatistics()">Áµ±Ë®àÊï∏Êìö</button>
        </div>

        <div class="squads-container" id="squads-container">
            <!-- Â∞èÈöäÂç°ÁâáÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->
        </div>
    </div>

    <!-- Êà∞Â†¥È†ÅÈù¢ -->
    <div class="page" id="battlefield-page">
        <!-- Êà∞È¨•ÊéßÂà∂Èù¢Êùø -->
        <div class="battle-controls">
            <div class="battle-title">‚öîÔ∏è Êà∞È¨•ÊéßÂà∂ ‚öîÔ∏è</div>
            
            <div class="squad-selector">
                <label>ÈÅ∏ÊìáÊîªÊìäÂ∞èÈöä:</label>
                <div class="squad-checkboxes" id="squad-checkboxes">
                    <!-- Â∞èÈöäÈÅ∏ÊìáÊ°ÜÂ∞áÂú®ÈÄôË£°ÁîüÊàê -->
                </div>
            </div>
            
            <div class="target-selector">
                <label>ÈÅ∏ÊìáÁõÆÊ®ôÂ§ñÊòü‰∫∫:</label>
                <div class="alien-buttons">
                    <button class="alien-btn" onclick="selectTarget(1)">
                        üëæ
                        <span class="alien-btn-text">#1</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(2)">
                        üëπ
                        <span class="alien-btn-text">#2</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(3)">
                        üë∫
                        <span class="alien-btn-text">#3</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(4)">
                        üòº
                        <span class="alien-btn-text">#4</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(5)">
                        üëª
                        <span class="alien-btn-text">#5</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(6)">
                        üéÉ
                        <span class="alien-btn-text">#6</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(7)">
                        ü§°
                        <span class="alien-btn-text">#7</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(8)">
                        üíÄ
                        <span class="alien-btn-text">#8</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(9)">
                        ü¶ñ
                        <span class="alien-btn-text">#9</span>
                    </button>
                    <button class="alien-btn" onclick="selectTarget(10)">
                        üêô
                        <span class="alien-btn-text">#10</span>
                    </button>
                </div>
            </div>
            
            <button class="attack-btn" id="attack-btn" onclick="executeAttack()" disabled>
                ÁôºÂãïÊîªÊìä
            </button>

            <div class="battle-info" id="battle-info">
                ÈÅ∏ÊìáÂ∞èÈöäÂíåÁõÆÊ®ôÈñãÂßãÊà∞È¨•
            </div>

            <!-- Ë°ÄÈáèË™øÊï¥Â∑•ÂÖ∑ -->
            <div class="hp-adjustment-tool">
                <div class="tool-title">ü©∏ Ë°ÄÈáèË™øÊï¥Â∑•ÂÖ∑</div>
                <div class="hp-controls">
                    <label>ÈÅ∏ÊìáÂ§ñÊòü‰∫∫:</label>
                    <select id="hp-alien-select" class="alien-select">
                        <option value="">ÈÅ∏ÊìáÂ§ñÊòü‰∫∫</option>
                        <option value="1">Â§ñÊòü‰∫∫ #1 (üëæ)</option>
                        <option value="2">Â§ñÊòü‰∫∫ #2 (üëπ)</option>
                        <option value="3">Â§ñÊòü‰∫∫ #3 (üë∫)</option>
                        <option value="4">Â§ñÊòü‰∫∫ #4 (üòº)</option>
                        <option value="5">Â§ñÊòü‰∫∫ #5 (üëª)</option>
                        <option value="6">Â§ñÊòü‰∫∫ #6 (üéÉ)</option>
                        <option value="7">Â§ñÊòü‰∫∫ #7 (ü§°)</option>
                        <option value="8">Â§ñÊòü‰∫∫ #8 (üíÄ)</option>
                        <option value="9">Â§ñÊòü‰∫∫ #9 (ü¶ñ)</option>
                        <option value="10">Â§ñÊòü‰∫∫ #10 (üêô)</option>
                    </select>
                    
                    <label>Ë®≠ÂÆöË°ÄÈáè:</label>
                    <input type="number" id="hp-value-input" placeholder="Ëº∏ÂÖ•Ë°ÄÈáè" min="0" max="9999" class="hp-value-input">
                    
                    <button class="hp-set-btn" onclick="setAlienHp()">Ë®≠ÂÆöË°ÄÈáè</button>
                </div>
                
                <div class="quick-hp-buttons">
                    <button class="quick-hp-btn" onclick="setAllAliensHp('max')">ÂÖ®ÈÉ®ÊªøË°Ä</button>
                    <button class="quick-hp-btn" onclick="setAllAliensHp('half')">ÂÖ®ÈÉ®ÂçäË°Ä</button>
                    <button class="quick-hp-btn" onclick="setAllAliensHp('zero')">ÂÖ®ÈÉ®Ê≠∏Èõ∂</button>
                </div>
            </div>

            <!-- ÊîªÊìäÊ¨°Êï∏Ë™øÊï¥Â∑•ÂÖ∑ -->
            <div class="attack-count-tool">
                <div class="tool-title">‚ö° ÊîªÊìäÊ¨°Êï∏ÁÆ°ÁêÜ</div>
                <div class="attack-controls">
                    <label>ÈÅ∏ÊìáÂ∞èÈöä:</label>
                    <select id="attack-squad-select" class="squad-select">
                        <option value="">ÈÅ∏ÊìáÂ∞èÈöä</option>
                        <option value="1">Â∞èÈöä #1</option>
                        <option value="2">Â∞èÈöä #2</option>
                        <option value="3">Â∞èÈöä #3</option>
                        <option value="4">Â∞èÈöä #4</option>
                        <option value="5">Â∞èÈöä #5</option>
                        <option value="6">Â∞èÈöä #6</option>
                        <option value="7">Â∞èÈöä #7</option>
                        <option value="8">Â∞èÈöä #8</option>
                        <option value="9">Â∞èÈöä #9</option>
                        <option value="10">Â∞èÈöä #10</option>
                    </select>
                    
                    <label>Ë®≠ÂÆöÊîªÊìäÊ¨°Êï∏:</label>
                    <input type="number" id="attack-count-input" placeholder="Ëº∏ÂÖ•Ê¨°Êï∏" min="0" max="99" class="attack-count-input">
                    
                    <button class="attack-set-btn" onclick="setSquadAttackCount()">Ë®≠ÂÆöÊ¨°Êï∏</button>
                </div>
                
                <div class="quick-attack-buttons">
                    <button class="quick-attack-btn" onclick="setAllSquadsAttackCount(1)">ÂÖ®ÈÉ®Ë®≠ÁÇ∫1Ê¨°</button>
                    <button class="quick-attack-btn" onclick="setAllSquadsAttackCount(3)">ÂÖ®ÈÉ®Ë®≠ÁÇ∫3Ê¨°</button>
                    <button class="quick-attack-btn" onclick="setAllSquadsAttackCount(5)">ÂÖ®ÈÉ®Ë®≠ÁÇ∫5Ê¨°</button>
                </div>
                
                <div class="reset-attacks-section">
                    <button class="reset-attacks-btn" onclick="resetAllAttackCounts()">ÈáçÁΩÆÊâÄÊúâÊîªÊìäÊ¨°Êï∏</button>
                </div>
            </div>

            <div class="points-adjustment-tool">
                <div class="tool-title">üí∞ ÈªûÊï∏Ë™øÊï¥Â∑•ÂÖ∑</div>
                <div class="points-controls">
                    <label>ÈÅ∏ÊìáÂ§ñÊòü‰∫∫:</label>
                    <select id="points-alien-select" class="alien-select">
                        <option value="">ÈÅ∏ÊìáÂ§ñÊòü‰∫∫</option>
                        <option value="1">Â§ñÊòü‰∫∫ #1 (üëæ)</option>
                        <option value="2">Â§ñÊòü‰∫∫ #2 (üëπ)</option>
                        <option value="3">Â§ñÊòü‰∫∫ #3 (üë∫)</option>
                        <option value="4">Â§ñÊòü‰∫∫ #4 (üòº)</option>
                        <option value="5">Â§ñÊòü‰∫∫ #5 (üëª)</option>
                        <option value="6">Â§ñÊòü‰∫∫ #6 (üéÉ)</option>
                        <option value="7">Â§ñÊòü‰∫∫ #7 (ü§°)</option>
                        <option value="8">Â§ñÊòü‰∫∫ #8 (üíÄ)</option>
                        <option value="9">Â§ñÊòü‰∫∫ #9 (ü¶ñ)</option>
                        <option value="10">Â§ñÊòü‰∫∫ #10 (üêô)</option>
                    </select>
                    
                    <label>Ë®≠ÂÆöÁç≤ÂæóÈªûÊï∏:</label>
                    <input type="number" id="points-value-input" placeholder="Ëº∏ÂÖ•ÈªûÊï∏" min="0" max="9999" class="points-value-input">
                    
                    <button class="points-set-btn" onclick="setAlienPoints()">Ë®≠ÂÆöÈªûÊï∏</button>
                </div>
                
                <div class="quick-points-buttons">
                    <button class="quick-points-btn" onclick="setAllAliensPoints(50)">ÂÖ®ÈÉ®Ë®≠ÁÇ∫50</button>
                    <button class="quick-points-btn" onclick="setAllAliensPoints(100)">ÂÖ®ÈÉ®Ë®≠ÁÇ∫100</button>
                    <button class="quick-points-btn" onclick="setAllAliensPoints(200)">ÂÖ®ÈÉ®Ë®≠ÁÇ∫200</button>
                </div>
            </div>

            <!-- Â∞èÈöäÈªûÊï∏È°ØÁ§∫Â∑•ÂÖ∑ -->
            <div class="squad-points-tool">
                <div class="tool-title">üíé Â∞èÈöäÁç≤ÂæóÈªûÊï∏</div>
                
                <div class="squad-points-grid" id="squad-points-grid">
                    <!-- Â∞èÈöäÈªûÊï∏Â∞áÂú®ÈÄôË£°ÂãïÊÖãÁîüÊàê -->
                </div>
                
                <div class="squad-points-controls">
                    <button class="reset-squad-points-btn" onclick="resetAllSquadPoints()">ÂÖ®ÈÉ®Ê≠∏Èõ∂</button>
                    <button class="add-points-btn" onclick="addPointsToAll()">Ê∏¨Ë©¶Âä†Èªû</button>
                </div>
            </div>
        </div>

        <div class="battlefield">
            <h1 class="main-title">üõ∏ Â§ñÊòü‰∫∫Êà∞Â†¥ üõ∏</h1>
            
            <div class="controls">
                <button class="btn" onclick="randomizeAliens()">Èö®Ê©üË°ÄÈáè</button>
                <button class="btn" onclick="calculateTotalPoints()">Ë®àÁÆóÁ∏ΩÈªûÊï∏</button>
                <button class="btn" onclick="resetBattle()">ÈáçÁΩÆÊà∞È¨•</button>
            </div>

            <!-- Â§ñÊòü‰∫∫ÂÄë -->
            <div class="alien alien-1" data-id="1">
                <div class="alien-sprite">
                    <span class="monster-icon">üëæ</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #1</div>
                    <input type="number" class="hp-input" value="300" min="0" oninput="updateHp(1, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="100" min="0">
                </div>
            </div>

            <div class="alien alien-2" data-id="2">
                <div class="alien-sprite">
                    <span class="monster-icon">üëπ</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #2</div>
                    <input type="number" class="hp-input" value="300" min="0" oninput="updateHp(2, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="80" min="0">
                </div>
            </div>

            <div class="alien alien-3" data-id="3">
                <div class="alien-sprite">
                    <span class="monster-icon">üë∫</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #3</div>
                    <input type="number" class="hp-input" value="400" min="0" oninput="updateHp(3, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="150" min="0">
                </div>
            </div>

            <div class="alien alien-4" data-id="4">
                <div class="alien-sprite">
                    <span class="monster-icon">üòº</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #4</div>
                    <input type="number" class="hp-input" value="300" min="0" oninput="updateHp(4, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="60" min="0">
                </div>
            </div>

            <div class="alien alien-5" data-id="5">
                <div class="alien-sprite">
                    <span class="monster-icon">üëª</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #5</div>
                    <input type="number" class="hp-input" value="400" min="0" oninput="updateHp(5, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="120" min="0">
                </div>
            </div>

            <div class="alien alien-6" data-id="6">
                <div class="alien-sprite">
                    <span class="monster-icon">üéÉ</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #6</div>
                    <input type="number" class="hp-input" value="300" min="0" oninput="updateHp(6, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="70" min="0">
                </div>
            </div>

            <div class="alien alien-7" data-id="7">
                <div class="alien-sprite">
                    <span class="monster-icon">ü§°</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #7</div>
                    <input type="number" class="hp-input" value="400" min="0" oninput="updateHp(7, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="90" min="0">
                </div>
            </div>

            <div class="alien alien-8" data-id="8">
                <div class="alien-sprite">
                    <span class="monster-icon">üíÄ</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #8</div>
                    <input type="number" class="hp-input" value="400" min="0" oninput="updateHp(8, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="110" min="0">
                </div>
            </div>

            <div class="alien alien-9" data-id="9">
                <div class="alien-sprite">
                    <span class="monster-icon">ü¶ñ</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #9</div>
                    <input type="number" class="hp-input" value="300" min="0" oninput="updateHp(9, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="50" min="0">
                </div>
            </div>

            <div class="alien alien-10" data-id="10">
                <div class="alien-sprite">
                    <span class="monster-icon">üêô</span>
                </div>
                <div class="hp-display">
                    <div class="alien-id">Â§ñÊòü‰∫∫ #10</div>
                    <input type="number" class="hp-input" value="450" min="0" oninput="updateHp(10, this.value)">
                    <div class="hp-bar">
                        <div class="hp-fill" style="width: 100%"></div>
                    </div>
                </div>
                <div class="points-display">
                    <div class="points-label">Áç≤ÂæóÈªûÊï∏</div>
                    <input type="number" class="points-input" value="200" min="0">
                </div>
            </div>
        </div>
    </div>

    <!-- Êà∞È¨•ÁµêÊûúÂΩàÁ™ó -->
    <div class="battle-result" id="battle-result">
        <div class="result-title">üéØ Êà∞È¨•ÁµêÊûú üéØ</div>
        <div class="result-content" id="result-content">
            <!-- ÁµêÊûúÂÖßÂÆπÂ∞áÂú®ÈÄôË£°È°ØÁ§∫ -->
        </div>
        <button class="result-close" onclick="closeBattleResult()">Á¢∫ÂÆö</button>
    </div>

    <script>
        // ÂÖ®ÂüüËÆäÊï∏
        let selectedSquads = [];
        let selectedTarget = null;
        let squadData = {};
        let squadAttackCounts = {};
        let squadPoints = {};
        
        // Á´∂ÊäÄÂ†¥ËÆäÊï∏
        let selectedSquadA = null;
        let selectedSquadB = null;
        
        // Â±¨ÊÄßÂÆöÁæ©
        const attributes = ['intelligence', 'vision', 'hearing', 'smell', 'upperLimb', 'lowerLimb', 'chest', 'abdomen'];
        const attributeNames = {
            intelligence: 'Êô∫Âäõ',
            vision: 'Ë¶ñË¶∫',
            hearing: 'ËÅΩË¶∫',
            smell: 'ÂóÖË¶∫',
            upperLimb: '‰∏äËÇ¢',
            lowerLimb: '‰∏ãËÇ¢',
            chest: 'ËÉ∏',
            abdomen: 'ËÖπ'
        };
        const attributeIcons = {
            intelligence: 'üß†',
            vision: 'üëÅÔ∏è',
            hearing: 'üëÇ',
            smell: 'üëÉ',
            upperLimb: 'üí™',
            lowerLimb: 'ü¶µ',
            chest: 'ü´Å',
            abdomen: 'üéØ'
        };

        const maxHp = {
            1: 300, 2: 300, 3: 400, 4: 300, 5: 400,
            6: 300, 7: 400, 8: 400, 9: 300, 10: 450
        };

        const initialHp = {
            1: 300, 2: 300, 3: 400, 4: 300, 5: 400,
            6: 300, 7: 400, 8: 400, 9: 300, 10: 450
        };

        // È†ÅÈù¢ÂàáÊèõ
        function switchPage(pageName) {
            console.log('Switching to page:', pageName); // Ë™øË©¶Áî®
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.querySelectorAll('.switch-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const targetPage = document.getElementById(pageName + '-page');
            const targetBtn = event ? event.target : null;
            
            if (targetPage) {
                targetPage.classList.add('active');
                console.log('Page activated:', pageName); // Ë™øË©¶Áî®
            } else {
                console.error('Page not found:', pageName + '-page'); // Ë™øË©¶Áî®
            }
            
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
            
            if (pageName === 'battlefield') {
                syncSquadData();
                updateSquadCheckboxes();
            } else if (pageName === 'squads') {
                updateSquadPointsDisplay();
            } else if (pageName === 'arena') {
                console.log('Switching to arena, syncing data...'); // Ë™øË©¶Áî®
                syncSquadData();
                setTimeout(() => {
                    updateArenaSquadOptions();
                }, 100); // Âª∂ÈÅ≤‰∏ÄÈªûÁ¢∫‰øùÊï∏ÊìöÂêåÊ≠•ÂÆåÊàê
            }
        }

        // ÂàùÂßãÂåñÂ∞èÈöäÂç°Áâá
        function initializeSquads() {
            const container = document.getElementById('squads-container');
            
            for (let squadId = 1; squadId <= 10; squadId++) {
                const squadCard = createSquadCard(squadId);
                container.appendChild(squadCard);
                
                squadData[squadId] = {
                    intelligence: 5, vision: 5, hearing: 5, smell: 5,
                    upperLimb: 5, lowerLimb: 5, chest: 5, abdomen: 5,
                    total: 40
                };
                
                squadAttackCounts[squadId] = 3;
                squadPoints[squadId] = 0;
            }
        }

        // ÂâµÂª∫Â∞èÈöäÂç°Áâá
        function createSquadCard(squadId) {
            const card = document.createElement('div');
            card.className = 'squad-card';
            card.setAttribute('data-squad', squadId);
            
            let attributesHTML = '';
            attributes.forEach(attr => {
                attributesHTML += `
                    <div class="attribute">
                        <div class="attribute-label">
                            <span class="attribute-icon">${attributeIcons[attr]}</span>
                            ${attributeNames[attr]}
                        </div>
                        <input type="number" class="attribute-input" data-attr="${attr}" value="5" min="0" max="100" oninput="updateAttribute(${squadId}, '${attr}', this.value)">
                        <div class="attribute-bar">
                            <div class="attribute-fill" style="width: 5%"></div>
                        </div>
                        <div class="point-controls">
                            <button class="point-btn" onclick="addPointToAttribute(${squadId}, '${attr}', -5)" title="Ê∏õÂ∞ë5Èªû">-5</button>
                            <button class="point-btn" onclick="addPointToAttribute(${squadId}, '${attr}', -1)" title="Ê∏õÂ∞ë1Èªû">-1</button>
                            <input type="number" class="point-input" placeholder="ÈªûÊï∏" min="1" max="100" onkeypress="handlePointInputEnter(event, ${squadId}, '${attr}')">
                            <button class="point-btn" onclick="addPointToAttribute(${squadId}, '${attr}', 1)" title="Â¢ûÂä†1Èªû">+1</button>
                            <button class="point-btn" onclick="addPointToAttribute(${squadId}, '${attr}', 5)" title="Â¢ûÂä†5Èªû">+5</button>
                        </div>
                    </div>
                `;
            });
            
            card.innerHTML = `
                <h2 class="squad-title">
                    <span class="squad-icon">‚öîÔ∏è</span>
                    Â∞èÈöä #${squadId}
                </h2>
                
                <div class="available-points">
                    <div class="points-label">ÂèØÁî®ÈªûÊï∏</div>
                    <div class="points-value-container">
                        <input type="number" class="points-value-input" id="squad-${squadId}-points-input" value="0" min="0" max="9999">
                        <button class="points-set-button" onclick="setSquadPoints(${squadId})">Ë®≠ÂÆö</button>
                    </div>
                </div>
                
                <div class="attributes-grid">
                    ${attributesHTML}
                </div>
                <div class="total-points">Á∏ΩÈªûÊï∏: <span class="total-value">40</span> / 800</div>
            `;
            
            return card;
        }

        // Êõ¥Êñ∞Â±¨ÊÄß
        function updateAttribute(squadId, attribute, value) {
            const squad = document.querySelector(`[data-squad="${squadId}"]`);
            if (!squad) return;
            
            const input = squad.querySelector(`[data-attr="${attribute}"]`);
            const bar = input.nextElementSibling.querySelector('.attribute-fill');
            
            const numValue = Math.max(0, Math.min(100, parseInt(value) || 0));
            input.value = numValue;
            
            squadData[squadId][attribute] = numValue;
            
            const percentage = (numValue / 100) * 100;
            bar.style.width = percentage + '%';
            
            if (percentage < 20) {
                bar.style.background = 'linear-gradient(90deg, #ff4757 0%, #ff6348 100%)';
            } else if (percentage < 60) {
                bar.style.background = 'linear-gradient(90deg, #ffa502 0%, #ff7675 100%)';
            } else {
                bar.style.background = 'linear-gradient(90deg, #2ed573 0%, #26de81 100%)';
            }
            
            updateTotalPoints(squadId);
        }

        // Êõ¥Êñ∞Á∏ΩÈªûÊï∏
        function updateTotalPoints(squadId) {
            const squad = document.querySelector(`[data-squad="${squadId}"]`);
            if (!squad) return;
            
            let total = 0;
            attributes.forEach(attr => {
                total += squadData[squadId][attr] || 0;
            });
            
            squadData[squadId].total = total;
            squad.querySelector('.total-value').textContent = total;
            
            updateSquadCheckboxes();
        }

        // ÂêåÊ≠•Â∞èÈöäË≥áÊñôÂà∞Êà∞Â†¥
        function syncSquadData() {
            for (let squadId = 1; squadId <= 10; squadId++) {
                const squad = document.querySelector(`[data-squad="${squadId}"]`);
                if (squad) {
                    let total = 0;
                    squad.querySelectorAll('.attribute-input').forEach(input => {
                        const attr = input.getAttribute('data-attr');
                        const value = parseInt(input.value) || 0;
                        squadData[squadId][attr] = value;
                        total += value;
                    });
                    squadData[squadId].total = total;
                }
            }
        }

        // Êõ¥Êñ∞Â∞èÈöäÈªûÊï∏È°ØÁ§∫
        function updateSquadPointsDisplay() {
            const grid = document.getElementById('squad-points-grid');
            
            if (!grid) return;
            
            grid.innerHTML = '';
            
            for (let squadId = 1; squadId <= 10; squadId++) {
                const points = squadPoints[squadId] || 0;
                
                const item = document.createElement('div');
                item.className = 'squad-points-item';
                item.innerHTML = `
                    <div class="squad-points-label">Â∞èÈöä #${squadId}</div>
                    <div class="squad-points-value">${points}</div>
                `;
                
                grid.appendChild(item);
                
                const squadPointsInput = document.getElementById(`squad-${squadId}-points-input`);
                if (squadPointsInput) {
                    squadPointsInput.value = points;
                }
            }
        }

        // Ë®≠ÂÆöÂ∞èÈöäÂèØÁî®ÈªûÊï∏
        function setSquadPoints(squadId) {
            const inputElement = document.getElementById(`squad-${squadId}-points-input`);
            const newPoints = parseInt(inputElement.value);
            
            if (isNaN(newPoints) || newPoints < 0) {
                alert('Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÈªûÊï∏ÂÄºÔºà0ÊàñÊõ¥Â§öÔºâÔºÅ');
                inputElement.value = squadPoints[squadId] || 0;
                return;
            }
            
            squadPoints[squadId] = newPoints;
            updateSquadPointsDisplay();
            
            const message = `Â∞èÈöä #${squadId} ÂèØÁî®ÈªûÊï∏Â∑≤Ë®≠ÂÆöÁÇ∫ ${newPoints} Èªû`;
            alert(message);
        }

        // ‰ΩøÁî®ÈªûÊï∏‰æÜÂ¢ûÂä†Â±¨ÊÄßÂÄº
        function addPointToAttribute(squadId, attribute, amount) {
            const availablePoints = squadPoints[squadId] || 0;
            const currentValue = squadData[squadId][attribute] || 5;
            
            if (amount > 0 && availablePoints < amount) {
                alert(`Â∞èÈöä #${squadId} ÂèØÁî®ÈªûÊï∏‰∏çË∂≥ÔºÅÁï∂ÂâçÂèØÁî®: ${availablePoints} Èªû`);
                return;
            }
            
            const newValue = currentValue + amount;
            if (newValue < 0 || newValue > 100) {
                alert(`Â±¨ÊÄßÂÄºÂøÖÈ†àÂú® 0-100 ‰πãÈñìÔºÅ`);
                return;
            }
            
            if (amount < 0) {
                squadPoints[squadId] = availablePoints + Math.abs(amount);
            } else {
                squadPoints[squadId] = availablePoints - amount;
            }
            
            squadData[squadId][attribute] = newValue;
            const squad = document.querySelector(`[data-squad="${squadId}"]`);
            const input = squad.querySelector(`[data-attr="${attribute}"]`);
            input.value = newValue;
            
            updateAttribute(squadId, attribute, newValue);
            updateSquadPointsDisplay();
        }

        // ËôïÁêÜÊâãÂãïËº∏ÂÖ•ÈªûÊï∏
        function handlePointInputEnter(event, squadId, attribute) {
            if (event.key === 'Enter') {
                const inputValue = parseInt(event.target.value);
                if (isNaN(inputValue) || inputValue <= 0) {
                    alert('Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÊ≠£Êï¥Êï∏ÔºÅ');
                    event.target.value = '';
                    return;
                }
                
                addPointToAttribute(squadId, attribute, inputValue);
                event.target.value = '';
            }
        }

        // Êõ¥Êñ∞Â∞èÈöäÈÅ∏ÊìáÊ°Ü
        function updateSquadCheckboxes() {
            const container = document.getElementById('squad-checkboxes');
            if (!container) return;
            
            container.innerHTML = '';
            
            for (let squadId = 1; squadId <= 10; squadId++) {
                const checkbox = document.createElement('div');
                checkbox.className = 'squad-checkbox';
                const attacksLeft = squadAttackCounts[squadId] || 0;
                
                if (attacksLeft <= 0) {
                    checkbox.classList.add('no-attacks');
                }
                
                checkbox.onclick = () => toggleSquadSelection(squadId);
                
                checkbox.innerHTML = `
                    <input type="checkbox" id="squad-${squadId}">
                    <div class="squad-label">Â∞èÈöä #${squadId}</div>
                    <div class="squad-points">${squadData[squadId]?.total || 40} Èªû</div>
                    <div class="squad-attacks">ÊîªÊìäÊ¨°Êï∏: ${attacksLeft}</div>
                `;
                
                container.appendChild(checkbox);
            }
        }

        // ÂàáÊèõÂ∞èÈöäÈÅ∏Êìá
        function toggleSquadSelection(squadId) {
            const checkbox = document.querySelector(`#squad-${squadId}`);
            if (!checkbox) return;
            
            const checkboxDiv = checkbox.parentElement;
            const isSelected = selectedSquads.includes(squadId);
            const attacksLeft = squadAttackCounts[squadId] || 0;
            
            if (!isSelected && attacksLeft <= 0) {
                alert(`Â∞èÈöä #${squadId} Ê≤íÊúâÂâ©È§òÊîªÊìäÊ¨°Êï∏ÔºÅ`);
                return;
            }
            
            if (isSelected) {
                selectedSquads = selectedSquads.filter(id => id !== squadId);
                checkboxDiv.classList.remove('selected');
            } else {
                selectedSquads.push(squadId);
                checkboxDiv.classList.add('selected');
            }
            
            updateBattleInfo();
            updateAttackButton();
        }

        // ÈÅ∏ÊìáÁõÆÊ®ô
        function selectTarget(alienId) {
            document.querySelectorAll('.alien-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.alien').forEach(alien => {
                alien.classList.remove('targeted');
            });
            
            selectedTarget = alienId;
            event.target.closest('.alien-btn').classList.add('selected');
            const targetAlien = document.querySelector(`.alien-${alienId}`);
            if (targetAlien) {
                targetAlien.classList.add('targeted');
            }
            
            updateBattleInfo();
            updateAttackButton();
        }

        // Êõ¥Êñ∞Êà∞È¨•Ë≥áË®ä
        function updateBattleInfo() {
            const infoDiv = document.getElementById('battle-info');
            if (!infoDiv) return;
            
            if (selectedSquads.length === 0 && !selectedTarget) {
                infoDiv.innerHTML = 'ÈÅ∏ÊìáÂ∞èÈöäÂíåÁõÆÊ®ôÈñãÂßãÊà∞È¨•';
                return;
            }
            
            let info = '';
            
            if (selectedSquads.length > 0) {
                const totalDamage = selectedSquads.reduce((sum, squadId) => {
                    return sum + (squadData[squadId]?.total || 0);
                }, 0);
                
                const attacksInfo = selectedSquads.map(squadId => {
                    const attacks = squadAttackCounts[squadId] || 0;
                    return `#${squadId}(${attacks}Ê¨°)`;
                }).join(', ');
                
                info += `Â∑≤ÈÅ∏ÊìáÂ∞èÈöä: ${attacksInfo}<br>`;
                info += `Á∏ΩÂÇ∑ÂÆ≥: ${totalDamage} Èªû<br>`;
            }
            
            if (selectedTarget) {
                const targetHpInput = document.querySelector(`.alien-${selectedTarget} .hp-input`);
                const targetHp = targetHpInput ? targetHpInput.value : '--';
                info += `ÁõÆÊ®ô: Â§ñÊòü‰∫∫ #${selectedTarget}<br>`;
                info += `ÁõÆÊ®ôË°ÄÈáè: ${targetHp} HP`;
            }
            
            infoDiv.innerHTML = info;
        }

        // Êõ¥Êñ∞ÊîªÊìäÊåâÈàïÁãÄÊÖã
        function updateAttackButton() {
            const attackBtn = document.getElementById('attack-btn');
            if (!attackBtn) return;
            
            const canAttack = selectedSquads.length > 0 && selectedTarget !== null;
            
            attackBtn.disabled = !canAttack;
            
            if (canAttack) {
                attackBtn.textContent = 'ÁôºÂãïÊîªÊìä';
            } else {
                attackBtn.textContent = 'ÈÅ∏ÊìáÂ∞èÈöäÂíåÁõÆÊ®ô';
            }
        }

        // Âü∑Ë°åÊîªÊìä
        function executeAttack() {
            if (selectedSquads.length === 0 || !selectedTarget) return;
            
            const invalidSquads = selectedSquads.filter(squadId => (squadAttackCounts[squadId] || 0) <= 0);
            if (invalidSquads.length > 0) {
                alert(`Â∞èÈöä ${invalidSquads.map(id => `#${id}`).join(', ')} Ê≤íÊúâÂâ©È§òÊîªÊìäÊ¨°Êï∏ÔºÅ`);
                return;
            }
            
            const totalDamage = selectedSquads.reduce((sum, squadId) => {
                return sum + (squadData[squadId]?.total || 0);
            }, 0);
            
            const targetAlien = document.querySelector(`.alien-${selectedTarget}`);
            if (!targetAlien) return;
            
            const hpInput = targetAlien.querySelector('.hp-input');
            const currentHp = parseInt(hpInput.value) || 0;
            const pointsInput = targetAlien.querySelector('.points-input');
            const rewardPoints = parseInt(pointsInput.value) || 0;
            
            const newHp = Math.max(0, currentHp - totalDamage);
            hpInput.value = newHp;
            
            updateHpInBattle(selectedTarget, newHp, currentHp);
            
            selectedSquads.forEach(squadId => {
                squadAttackCounts[squadId] = Math.max(0, (squadAttackCounts[squadId] || 0) - 1);
            });
            
            updateSquadCheckboxes();
            
            let resultMessage = `‚öîÔ∏è Êà∞È¨•ÁµêÊûú ‚öîÔ∏è\n\n`;
            resultMessage += `ÊîªÊìäÂ∞èÈöä: ${selectedSquads.map(id => `#${id}`).join(', ')}\n`;
            resultMessage += `ÈÄ†ÊàêÂÇ∑ÂÆ≥: ${totalDamage} Èªû\n`;
            resultMessage += `Â§ñÊòü‰∫∫ #${selectedTarget}: ${currentHp} ‚Üí ${newHp} HP\n\n`;
            
            resultMessage += `Ââ©È§òÊîªÊìäÊ¨°Êï∏:\n`;
            selectedSquads.forEach(squadId => {
                resultMessage += `Â∞èÈöä #${squadId}: ${squadAttackCounts[squadId]} Ê¨°\n`;
            });
            resultMessage += `\n`;
            
            if (newHp <= 0) {
                const pointsPerSquad = Math.floor(rewardPoints / selectedSquads.length);
                
                selectedSquads.forEach((squadId) => {
                    squadPoints[squadId] = (squadPoints[squadId] || 0) + pointsPerSquad;
                });
                
                updateSquadPointsDisplay();
                
                resultMessage += `üéâ Â§ñÊòü‰∫∫ #${selectedTarget} Ë¢´ÊìäÊïóÔºÅ\n\n`;
                resultMessage += `ÁçéÂãµÂàÜÈÖç:\n`;
                
                selectedSquads.forEach((squadId) => {
                    resultMessage += `Â∞èÈöä #${squadId}: +${pointsPerSquad} Èªû\n`;
                });
                
                const totalDistributed = pointsPerSquad * selectedSquads.length;
                const remainder = rewardPoints - totalDistributed;
                if (remainder > 0) {
                    resultMessage += `\n(Ââ©È§ò ${remainder} ÈªûÊú™ÂàÜÈÖç)`;
                }
            } else {
                resultMessage += `Â§ñÊòü‰∫∫ #${selectedTarget} ÈÇÑÊúâ ${newHp} HP`;
            }
            
            showBattleResult(resultMessage);
            clearSelections();
        }

        // Êà∞È¨•ÊôÇÁöÑË°ÄÈáèÊõ¥Êñ∞
        function updateHpInBattle(id, newHp, originalMaxHp) {
            const alien = document.querySelector(`.alien-${id}`);
            if (!alien) return;
            
            const hpBar = alien.querySelector('.hp-fill');
            const hpInput = alien.querySelector('.hp-input');
            
            const validHp = Math.max(0, newHp);
            hpInput.value = validHp;
            
            const percentage = Math.max(0, Math.min(100, (validHp / originalMaxHp) * 100));
            hpBar.style.width = percentage + '%';
            
            if (validHp <= 0) {
                alien.classList.add('dead');
            } else {
                alien.classList.remove('dead');
            }
            
            if (percentage > 60) {
                hpBar.style.background = 'linear-gradient(90deg, #2ed573 0%, #26de81 100%)';
            } else if (percentage > 30) {
                hpBar.style.background = 'linear-gradient(90deg, #ffa502 0%, #ff7675 100%)';
            } else {
                hpBar.style.background = 'linear-gradient(90deg, #ff4757 0%, #ee5a6f 100%)';
            }
        }

        // È°ØÁ§∫Êà∞È¨•ÁµêÊûú
        function showBattleResult(message) {
            const resultDiv = document.getElementById('battle-result');
            const contentDiv = document.getElementById('result-content');
            
            if (resultDiv && contentDiv) {
                contentDiv.innerHTML = message.replace(/\n/g, '<br>');
                resultDiv.style.display = 'block';
            }
        }

        // ÈóúÈñâÊà∞È¨•ÁµêÊûú
        function closeBattleResult() {
            const resultDiv = document.getElementById('battle-result');
            if (resultDiv) {
                resultDiv.style.display = 'none';
            }
        }

        // Ê∏ÖÈô§ÈÅ∏Êìá
        function clearSelections() {
            selectedSquads = [];
            selectedTarget = null;
            
            document.querySelectorAll('.squad-checkbox').forEach(checkbox => {
                checkbox.classList.remove('selected');
            });
            
            document.querySelectorAll('.alien-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            document.querySelectorAll('.alien').forEach(alien => {
                alien.classList.remove('targeted');
            });
            
            updateBattleInfo();
            updateAttackButton();
        }

        // Êõ¥Êñ∞Â§ñÊòü‰∫∫Ë°ÄÈáè
        function updateHp(id, value) {
            const alien = document.querySelector(`.alien-${id}`);
            if (!alien) return;
            
            const hpBar = alien.querySelector('.hp-fill');
            const hpInput = alien.querySelector('.hp-input');
            const currentHp = parseInt(value) || 0;
            
            const validHp = Math.max(0, currentHp);
            if (hpInput.value !== value) {
                hpInput.value = validHp;
            }
            
            maxHp[id] = validHp;
            
            const percentage = validHp > 0 ? 100 : 0;
            hpBar.style.width = percentage + '%';
            
            if (validHp <= 0) {
                alien.classList.add('dead');
                hpBar.style.background = 'linear-gradient(90deg, #ff4757 0%, #ee5a6f 100%)';
            } else {
                alien.classList.remove('dead');
                hpBar.style.background = 'linear-gradient(90deg, #2ed573 0%, #26de81 100%)';
            }
        }

        // ÈáçÁΩÆÊâÄÊúâÂ∞èÈöä
        function resetAllSquads() {
            for (let squadId = 1; squadId <= 10; squadId++) {
                const squad = document.querySelector(`[data-squad="${squadId}"]`);
                if (!squad) continue;
                
                squad.querySelectorAll('.attribute-input').forEach(input => {
                    input.value = 5;
                    updateAttribute(squadId, input.getAttribute('data-attr'), 5);
                });
            }
        }

        // Èö®Ê©üÂàÜÈÖçÂ±¨ÊÄß
        function randomizeAllSquads() {
            for (let squadId = 1; squadId <= 10; squadId++) {
                const squad = document.querySelector(`[data-squad="${squadId}"]`);
                if (!squad) continue;
                
                squad.querySelectorAll('.attribute-input').forEach(input => {
                    const randomValue = Math.floor(Math.random() * 46) + 5;
                    input.value = randomValue;
                    updateAttribute(squadId, input.getAttribute('data-attr'), randomValue);
                });
            }
        }

        // È°ØÁ§∫Áµ±Ë®àÊï∏Êìö
        function showStatistics() {
            let totalPoints = 0;
            let squadStats = [];
            
            for (let squadId = 1; squadId <= 10; squadId++) {
                const squadTotal = squadData[squadId]?.total || 0;
                totalPoints += squadTotal;
                squadStats.push(`Â∞èÈöä #${squadId}: ${squadTotal} Èªû`);
            }
            
            alert(`===== Áµ±Ë®àÊï∏Êìö =====\n\n${squadStats.join('\n')}\n\nÁ∏ΩË®à: ${totalPoints} Èªû\nÂπ≥Âùá: ${(totalPoints/10).toFixed(1)} Èªû/Â∞èÈöä`);
        }

        // Èö®Ê©üË°ÄÈáè
        function randomizeAliens() {
            for (let i = 1; i <= 10; i++) {
                const randomHp = Math.floor(Math.random() * maxHp[i]);
                const input = document.querySelector(`.alien-${i} .hp-input`);
                if (input) {
                    input.value = randomHp;
                    updateHp(i, randomHp);
                }
            }
        }

        // Ë®àÁÆóÁ∏ΩÈªûÊï∏
        function calculateTotalPoints() {
            let totalPoints = 0;
            let defeatedCount = 0;
            
            for (let i = 1; i <= 10; i++) {
                const hpInput = document.querySelector(`.alien-${i} .hp-input`);
                const pointsInput = document.querySelector(`.alien-${i} .points-input`);
                
                if (hpInput && pointsInput) {
                    const hp = parseInt(hpInput.value) || 0;
                    const points = parseInt(pointsInput.value) || 0;
                    
                    if (hp <= 0) {
                        totalPoints += points;
                        defeatedCount++;
                    }
                }
            }
            
            alert(`Â∑≤ÊìäÊïó ${defeatedCount} ÈöªÂ§ñÊòü‰∫∫\nÁç≤ÂæóÁ∏ΩÈªûÊï∏: ${totalPoints} Èªû`);
        }

        // ÈáçÁΩÆÊà∞È¨•
        function resetBattle() {
            for (let i = 1; i <= 10; i++) {
                const input = document.querySelector(`.alien-${i} .hp-input`);
                if (input) {
                    input.value = initialHp[i];
                    updateHp(i, initialHp[i]);
                }
            }
            
            clearSelections();
            alert('Êà∞È¨•Â∑≤ÈáçÁΩÆÔºÅÊâÄÊúâÂ§ñÊòü‰∫∫Ë°ÄÈáèÂ∑≤ÊÅ¢Âæ©ÊªøË°ÄÁãÄÊÖã„ÄÇ');
        }

        // ÈáçÁΩÆÊâÄÊúâÂ∞èÈöäÈªûÊï∏
        function resetAllSquadPoints() {
            for (let squadId = 1; squadId <= 10; squadId++) {
                squadPoints[squadId] = 0;
            }
            updateSquadPointsDisplay();
            alert('ÊâÄÊúâÂ∞èÈöäÈªûÊï∏Â∑≤Ê≠∏Èõ∂ÔºÅ');
        }

        // Ê∏¨Ë©¶ÂäüËÉΩÔºöÁµ¶ÊâÄÊúâÂ∞èÈöäÂä†ÈªûÊï∏
        function addPointsToAll() {
            const points = parseInt(prompt('Áµ¶ÊØèÂÄãÂ∞èÈöäÂä†Â§öÂ∞ëÈªûÊï∏Ôºü', '50'));
            if (isNaN(points) || points <= 0) {
                alert('Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÈªûÊï∏ÔºÅ');
                return;
            }
            
            for (let squadId = 1; squadId <= 10; squadId++) {
                squadPoints[squadId] = (squadPoints[squadId] || 0) + points;
            }
            updateSquadPointsDisplay();
            alert(`Â∑≤Áµ¶ÊâÄÊúâÂ∞èÈöäÂêÑÂ¢ûÂä† ${points} ÈªûÔºÅ`);
        }

        // Ë®≠ÂÆöÂñÆ‰∏ÄÂ§ñÊòü‰∫∫Ë°ÄÈáè
        function setAlienHp() {
            const selectElement = document.getElementById('hp-alien-select');
            const inputElement = document.getElementById('hp-value-input');
            
            const alienId = selectElement.value;
            const hpValue = parseInt(inputElement.value);
            
            if (!alienId) {
                alert('Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÂ§ñÊòü‰∫∫ÔºÅ');
                return;
            }
            
            if (isNaN(hpValue) || hpValue < 0) {
                alert('Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑË°ÄÈáèÂÄºÔºÅ');
                return;
            }
            
            const hpInput = document.querySelector(`.alien-${alienId} .hp-input`);
            if (hpInput) {
                hpInput.value = hpValue;
                updateHp(alienId, hpValue);
                
                inputElement.value = '';
                selectElement.value = '';
                
                alert(`Â§ñÊòü‰∫∫ #${alienId} Ë°ÄÈáèÂ∑≤Ë®≠ÂÆöÁÇ∫ ${hpValue} HP`);
            }
        }

        // ÊâπÈáèË®≠ÂÆöÂ§ñÊòü‰∫∫Ë°ÄÈáè
        function setAllAliensHp(type) {
            let targetHp;
            let actionName;
            
            switch(type) {
                case 'max':
                    actionName = 'ÊªøË°Ä';
                    break;
                case 'half':
                    actionName = 'ÂçäË°Ä';
                    break;
                case 'zero':
                    targetHp = 0;
                    actionName = 'Ê≠∏Èõ∂';
                    break;
                default:
                    return;
            }
            
            for (let i = 1; i <= 10; i++) {
                if (type === 'max') {
                    targetHp = initialHp[i];
                } else if (type === 'half') {
                    targetHp = Math.floor(initialHp[i] / 2);
                }
                
                const hpInput = document.querySelector(`.alien-${i} .hp-input`);
                if (hpInput) {
                    hpInput.value = targetHp;
                    updateHp(i, targetHp);
                }
            }
            
            alert(`ÊâÄÊúâÂ§ñÊòü‰∫∫Ë°ÄÈáèÂ∑≤Ë®≠ÂÆöÁÇ∫${actionName}ÁãÄÊÖãÔºÅ`);
        }

        // Ë®≠ÂÆöÂñÆ‰∏ÄÂ§ñÊòü‰∫∫ÈªûÊï∏
        function setAlienPoints() {
            const selectElement = document.getElementById('points-alien-select');
            const inputElement = document.getElementById('points-value-input');
            
            const alienId = selectElement.value;
            const pointsValue = parseInt(inputElement.value);
            
            if (!alienId) {
                alert('Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÂ§ñÊòü‰∫∫ÔºÅ');
                return;
            }
            
            if (isNaN(pointsValue) || pointsValue < 0) {
                alert('Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÈªûÊï∏ÂÄºÔºÅ');
                return;
            }
            
            const pointsInput = document.querySelector(`.alien-${alienId} .points-input`);
            if (pointsInput) {
                pointsInput.value = pointsValue;
                
                inputElement.value = '';
                selectElement.value = '';
                
                alert(`Â§ñÊòü‰∫∫ #${alienId} Áç≤ÂæóÈªûÊï∏Â∑≤Ë®≠ÂÆöÁÇ∫ ${pointsValue} Èªû`);
            }
        }

        // ÊâπÈáèË®≠ÂÆöÂ§ñÊòü‰∫∫ÈªûÊï∏
        function setAllAliensPoints(pointsValue) {
            for (let i = 1; i <= 10; i++) {
                const pointsInput = document.querySelector(`.alien-${i} .points-input`);
                if (pointsInput) {
                    pointsInput.value = pointsValue;
                }
            }
            
            alert(`ÊâÄÊúâÂ§ñÊòü‰∫∫Áç≤ÂæóÈªûÊï∏Â∑≤Ë®≠ÂÆöÁÇ∫ ${pointsValue} ÈªûÔºÅ`);
        }

        // Ë®≠ÂÆöÂñÆ‰∏ÄÂ∞èÈöäÊîªÊìäÊ¨°Êï∏
        function setSquadAttackCount() {
            const selectElement = document.getElementById('attack-squad-select');
            const inputElement = document.getElementById('attack-count-input');
            
            const squadId = parseInt(selectElement.value);
            const attackCount = parseInt(inputElement.value);
            
            if (!squadId) {
                alert('Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÂ∞èÈöäÔºÅ');
                return;
            }
            
            if (isNaN(attackCount) || attackCount < 0) {
                alert('Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÊîªÊìäÊ¨°Êï∏ÔºÅ');
                return;
            }
            
            squadAttackCounts[squadId] = attackCount;
            updateSquadCheckboxes();
            
            inputElement.value = '';
            selectElement.value = '';
            
            alert(`Â∞èÈöä #${squadId} ÊîªÊìäÊ¨°Êï∏Â∑≤Ë®≠ÂÆöÁÇ∫ ${attackCount} Ê¨°`);
        }

        // ÊâπÈáèË®≠ÂÆöÂ∞èÈöäÊîªÊìäÊ¨°Êï∏
        function setAllSquadsAttackCount(attackCount) {
            for (let i = 1; i <= 10; i++) {
                squadAttackCounts[i] = attackCount;
            }
            
            updateSquadCheckboxes();
            alert(`ÊâÄÊúâÂ∞èÈöäÊîªÊìäÊ¨°Êï∏Â∑≤Ë®≠ÂÆöÁÇ∫ ${attackCount} Ê¨°ÔºÅ`);
        }

        // ÈáçÁΩÆÊâÄÊúâÊîªÊìäÊ¨°Êï∏
        function resetAllAttackCounts() {
            for (let i = 1; i <= 10; i++) {
                squadAttackCounts[i] = 3;
            }
            
            updateSquadCheckboxes();
            clearSelections();
            alert('ÊâÄÊúâÂ∞èÈöäÊîªÊìäÊ¨°Êï∏Â∑≤ÈáçÁΩÆÁÇ∫ 3 Ê¨°ÔºÅ');
        }

        // ÂâµÂª∫ÊòüÊòüËÉåÊôØ
        function createStars() {
            const starsContainer = document.getElementById('stars');
            if (!starsContainer) return;
            
            const starCount = 100;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                const size = Math.random() * 3 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                
                starsContainer.appendChild(star);
            }
        }

        // ÂàùÂßãÂåñ
        window.addEventListener('load', () => {
            initializeSquads();
            createStars();
            updateSquadCheckboxes();
            updateSquadPointsDisplay();
            
            // Á¢∫‰øùÁ´∂ÊäÄÂ†¥È†ÅÈù¢Â≠òÂú®
            ensureArenaPageExists();
            
            for (let i = 1; i <= 10; i++) {
                const input = document.querySelector(`.alien-${i} .hp-input`);
                if (input) {
                    updateHp(i, input.value);
                }
            }
        });

        // Á¢∫‰øùÁ´∂ÊäÄÂ†¥È†ÅÈù¢Â≠òÂú®
        function ensureArenaPageExists() {
            console.log('Checking if arena page exists...');
            let arenaPage = document.getElementById('arena-page');
            
            if (!arenaPage) {
                console.log('Arena page not found, creating it...');
                
                // ÂâµÂª∫Á´∂ÊäÄÂ†¥È†ÅÈù¢
                arenaPage = document.createElement('div');
                arenaPage.className = 'page';
                arenaPage.id = 'arena-page';
                
                arenaPage.innerHTML = `
                    <h1 class="main-title">‚öîÔ∏è Â∞èÈöäÁ´∂ÊäÄÂ†¥ ‚öîÔ∏è</h1>
                    
                    <div class="arena-container">
                        <!-- Â∑¶ÂÅ¥Â∞èÈöäÈÅ∏Êìá -->
                        <div class="squad-selector-arena">
                            <h2 class="selector-title">ÈÅ∏ÊìáÂ∞èÈöä A</h2>
                            <div class="squad-options" id="squad-a-options">
                                <!-- Â∞èÈöäÈÅ∏È†ÖÂ∞áÂú®ÈÄôË£°ÁîüÊàê -->
                            </div>
                        </div>

                        <!-- ‰∏≠Â§ÆÊà∞È¨•ÂçÄÂüü -->
                        <div class="battle-area-arena">
                            <h2 class="battle-title-arena">üèüÔ∏è Á´∂ÊäÄÂ†¥Â∞çÊà∞ üèüÔ∏è</h2>
                            
                            <div class="vs-display">
                                <div class="squad-display">
                                    <div class="squad-display-name" id="squad-a-name">ÈÅ∏ÊìáÂ∞èÈöä A</div>
                                    <div class="squad-display-total" id="squad-a-total">Á∏ΩÈªûÊï∏: --</div>
                                </div>
                                
                                <div class="vs-text">VS</div>
                                
                                <div class="squad-display">
                                    <div class="squad-display-name" id="squad-b-name">ÈÅ∏ÊìáÂ∞èÈöä B</div>
                                    <div class="squad-display-total" id="squad-b-total">Á∏ΩÈªûÊï∏: --</div>
                                </div>
                            </div>

                            <button class="battle-button-arena" id="arena-battle-btn" onclick="startArenaBattle()" disabled>
                                ÈñãÂßãÂ∞çÊà∞
                            </button>

                            <div class="comparison-results" id="comparison-results">
                                <!-- ÊØîËºÉÁµêÊûúÂ∞áÂú®ÈÄôË£°È°ØÁ§∫ -->
                            </div>

                            <button class="reset-button-arena" onclick="resetArenaBattle()">ÈáçÁΩÆÂ∞çÊà∞</button>
                        </div>

                        <!-- Âè≥ÂÅ¥Â∞èÈöäÈÅ∏Êìá -->
                        <div class="squad-selector-arena">
                            <h2 class="selector-title">ÈÅ∏ÊìáÂ∞èÈöä B</h2>
                            <div class="squad-options" id="squad-b-options">
                                <!-- Â∞èÈöäÈÅ∏È†ÖÂ∞áÂú®ÈÄôË£°ÁîüÊàê -->
                            </div>
                        </div>
                    </div>
                `;
                
                // Ê∑ªÂä†Âà∞body‰∏≠ÔºåÂú®Êà∞È¨•ÁµêÊûúÂΩàÁ™ó‰πãÂâç
                const battleResult = document.getElementById('battle-result');
                if (battleResult) {
                    document.body.insertBefore(arenaPage, battleResult);
                } else {
                    document.body.appendChild(arenaPage);
                }
                
                console.log('Arena page created successfully');
            } else {
                console.log('Arena page already exists');
            }
        }

        // ======== Á´∂ÊäÄÂ†¥Áõ∏ÈóúÂáΩÊï∏ ========
        
        // Êõ¥Êñ∞Á´∂ÊäÄÂ†¥Â∞èÈöäÈÅ∏È†Ö
        function updateArenaSquadOptions() {
            console.log('Updating arena squad options...'); // Ë™øË©¶Áî®
            console.log('Squad data:', squadData); // Ë™øË©¶Áî®
            
            const squadAContainer = document.getElementById('squad-a-options');
            const squadBContainer = document.getElementById('squad-b-options');
            
            console.log('Containers found:', !!squadAContainer, !!squadBContainer); // Ë™øË©¶Áî®
            
            if (!squadAContainer || !squadBContainer) {
                console.error('Arena containers not found!');
                return;
            }
            
            squadAContainer.innerHTML = '';
            squadBContainer.innerHTML = '';
            
            for (let squadId = 1; squadId <= 10; squadId++) {
                const data = squadData[squadId];
                if (!data) {
                    console.log(`No data for squad ${squadId}`); // Ë™øË©¶Áî®
                    continue;
                }
                
                console.log(`Creating options for squad ${squadId}:`, data); // Ë™øË©¶Áî®
                
                // ÂâµÂª∫Â∞èÈöäAÈÅ∏È†Ö
                const optionA = document.createElement('div');
                optionA.className = 'squad-option';
                optionA.setAttribute('data-squad-id', squadId);
                optionA.setAttribute('data-side', 'A');
                optionA.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Squad A clicked:', squadId); // Ë™øË©¶Áî®
                    selectArenaSquad('A', squadId);
                });
                optionA.innerHTML = `
                    <div class="squad-name">Â∞èÈöä #${squadId}</div>
                    <div class="squad-total">Á∏ΩÈªûÊï∏: ${data.total}</div>
                `;
                squadAContainer.appendChild(optionA);
                
                // ÂâµÂª∫Â∞èÈöäBÈÅ∏È†Ö
                const optionB = document.createElement('div');
                optionB.className = 'squad-option';
                optionB.setAttribute('data-squad-id', squadId);
                optionB.setAttribute('data-side', 'B');
                optionB.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Squad B clicked:', squadId); // Ë™øË©¶Áî®
                    selectArenaSquad('B', squadId);
                });
                optionB.innerHTML = `
                    <div class="squad-name">Â∞èÈöä #${squadId}</div>
                    <div class="squad-total">Á∏ΩÈªûÊï∏: ${data.total}</div>
                `;
                squadBContainer.appendChild(optionB);
            }
            
            console.log('Arena options updated successfully'); // Ë™øË©¶Áî®
        }

        // ÈÅ∏ÊìáÁ´∂ÊäÄÂ†¥Â∞èÈöä
        function selectArenaSquad(side, squadId) {
            console.log('Selecting arena squad:', side, squadId); // Ë™øË©¶Áî®
            
            try {
                if (side === 'A') {
                    // Ê∏ÖÈô§‰πãÂâçÁöÑÈÅ∏Êìá
                    document.querySelectorAll('#squad-a-options .squad-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    
                    // Ë®≠ÁΩÆÊñ∞ÈÅ∏Êìá
                    selectedSquadA = squadId;
                    const clickedOption = document.querySelector(`#squad-a-options .squad-option[data-squad-id="${squadId}"]`);
                    if (clickedOption) {
                        clickedOption.classList.add('selected');
                        console.log('Squad A selected successfully'); // Ë™øË©¶Áî®
                    } else {
                        console.error('Could not find squad A option'); // Ë™øË©¶Áî®
                    }
                    
                    // Êõ¥Êñ∞È°ØÁ§∫
                    const squadAName = document.getElementById('squad-a-name');
                    const squadATotal = document.getElementById('squad-a-total');
                    if (squadAName) squadAName.textContent = `Â∞èÈöä #${squadId}`;
                    if (squadATotal && squadData[squadId]) {
                        squadATotal.textContent = `Á∏ΩÈªûÊï∏: ${squadData[squadId].total}`;
                    }
                    
                } else if (side === 'B') {
                    // Ê∏ÖÈô§‰πãÂâçÁöÑÈÅ∏Êìá
                    document.querySelectorAll('#squad-b-options .squad-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    
                    // Ë®≠ÁΩÆÊñ∞ÈÅ∏Êìá
                    selectedSquadB = squadId;
                    const clickedOption = document.querySelector(`#squad-b-options .squad-option[data-squad-id="${squadId}"]`);
                    if (clickedOption) {
                        clickedOption.classList.add('selected');
                        console.log('Squad B selected successfully'); // Ë™øË©¶Áî®
                    } else {
                        console.error('Could not find squad B option'); // Ë™øË©¶Áî®
                    }
                    
                    // Êõ¥Êñ∞È°ØÁ§∫
                    const squadBName = document.getElementById('squad-b-name');
                    const squadBTotal = document.getElementById('squad-b-total');
                    if (squadBName) squadBName.textContent = `Â∞èÈöä #${squadId}`;
                    if (squadBTotal && squadData[squadId]) {
                        squadBTotal.textContent = `Á∏ΩÈªûÊï∏: ${squadData[squadId].total}`;
                    }
                }
                
                // Ê™¢Êü•ÊòØÂê¶ÂèØ‰ª•ÈñãÂßãÊà∞È¨•
                const battleBtn = document.getElementById('arena-battle-btn');
                if (!battleBtn) {
                    console.error('Arena battle button not found'); // Ë™øË©¶Áî®
                    return;
                }
                
                if (selectedSquadA && selectedSquadB && selectedSquadA !== selectedSquadB) {
                    battleBtn.disabled = false;
                    battleBtn.textContent = 'ÈñãÂßãÂ∞çÊà∞';
                    console.log('Battle ready!'); // Ë™øË©¶Áî®
                } else if (selectedSquadA === selectedSquadB && selectedSquadA !== null) {
                    battleBtn.disabled = true;
                    battleBtn.textContent = '‰∏çËÉΩÈÅ∏ÊìáÂêå‰∏ÄÂ∞èÈöä';
                } else {
                    battleBtn.disabled = true;
                    battleBtn.textContent = 'Ë´ãÈÅ∏ÊìáÂÖ©ÊîØ‰∏çÂêåÁöÑÂ∞èÈöä';
                }
            } catch (error) {
                console.error('Error in selectArenaSquad:', error); // Ë™øË©¶Áî®
            }
        }

        // ÈñãÂßãÁ´∂ÊäÄÂ†¥Êà∞È¨•
        function startArenaBattle() {
            if (!selectedSquadA || !selectedSquadB || selectedSquadA === selectedSquadB) {
                alert('Ë´ãÈÅ∏ÊìáÂÖ©ÊîØ‰∏çÂêåÁöÑÂ∞èÈöäÔºÅ');
                return;
            }
            
            const squadA = squadData[selectedSquadA];
            const squadB = squadData[selectedSquadB];
            
            const resultsContainer = document.getElementById('comparison-results');
            if (!resultsContainer) return;
            
            resultsContainer.innerHTML = '';
            
            // Âè™ÊØîËºÉÁ∏ΩËÉΩÂäõÂÄº
            const totalA = squadA.total;
            const totalB = squadB.total;
            
            let winner = '';
            let winnerText = '';
            
            if (totalA > totalB) {
                winner = 'A';
                winnerText = `üèÜ Â∞èÈöä #${selectedSquadA} Áç≤ÂãùÔºÅ üèÜ`;
            } else if (totalB > totalA) {
                winner = 'B';
                winnerText = `üèÜ Â∞èÈöä #${selectedSquadB} Áç≤ÂãùÔºÅ üèÜ`;
            } else {
                winnerText = 'ü§ù Âπ≥ÊâãÔºÅ ü§ù';
            }
            
            // ÂâµÂª∫Á∏ΩËÉΩÂäõÂÄºÊØîËºÉÈ°ØÁ§∫
            const totalComparisonDiv = document.createElement('div');
            totalComparisonDiv.className = 'total-comparison';
            totalComparisonDiv.innerHTML = `
                <div class="total-comparison-title">‚öîÔ∏è Á∏ΩËÉΩÂäõÂÄºÂ∞çÊ±∫ ‚öîÔ∏è</div>
                <div class="total-vs-display">
                    <div class="total-squad-info">
                        <div class="total-squad-name">Â∞èÈöä #${selectedSquadA}</div>
                        <div class="total-value ${winner === 'A' ? 'winner' : (winner === 'B' ? 'loser' : '')}">${totalA}</div>
                    </div>
                    
                    <div class="total-vs-text">VS</div>
                    
                    <div class="total-squad-info">
                        <div class="total-squad-name">Â∞èÈöä #${selectedSquadB}</div>
                        <div class="total-value ${winner === 'B' ? 'winner' : (winner === 'A' ? 'loser' : '')}">${totalB}</div>
                    </div>
                </div>
                
                <div class="total-difference">
                    ${winner ? `ËÉΩÂäõÂÄºÂ∑ÆË∑ù: ${Math.abs(totalA - totalB)} Èªû` : 'ÂØ¶ÂäõÁõ∏Áï∂ÔºÅ'}
                </div>
            `;
            resultsContainer.appendChild(totalComparisonDiv);
            
            // È°ØÁ§∫Ë©≥Á¥∞Â±¨ÊÄßÊØîËºÉÔºàÂÉÖ‰æõÂèÉËÄÉÔºå‰∏çÂΩ±ÈüøÂãùË≤†Ôºâ
            const detailsDiv = document.createElement('div');
            detailsDiv.className = 'attribute-details';
            detailsDiv.innerHTML = `
                <div class="details-title">üìä Ë©≥Á¥∞Â±¨ÊÄßÊØîËºÉÔºàÂÉÖ‰æõÂèÉËÄÉÔºâ</div>
                <div class="details-grid">
            `;
            
            // È°ØÁ§∫ÂêÑÂ±¨ÊÄßÁöÑË©≥Á¥∞ÊØîËºÉ
            attributes.forEach(attr => {
                const valueA = squadA[attr];
                const valueB = squadB[attr];
                
                let attrWinner = '';
                if (valueA > valueB) {
                    attrWinner = 'A';
                } else if (valueB > valueA) {
                    attrWinner = 'B';
                }
                
                detailsDiv.innerHTML += `
                    <div class="detail-row">
                        <div class="detail-value ${attrWinner === 'A' ? 'detail-winner' : ''}">${valueA}</div>
                        <div class="detail-attr">${attributeIcons[attr]} ${attributeNames[attr]}</div>
                        <div class="detail-value ${attrWinner === 'B' ? 'detail-winner' : ''}">${valueB}</div>
                    </div>
                `;
            });
            
            detailsDiv.innerHTML += '</div>';
            resultsContainer.appendChild(detailsDiv);
            
            // È°ØÁ§∫ÊúÄÁµÇÁµêÊûú
            const finalResult = document.createElement('div');
            finalResult.className = 'final-result';
            finalResult.innerHTML = `
                <div class="final-result-title">üèÜ Â∞çÊà∞ÁµêÊûú üèÜ</div>
                <div class="winner-announcement">${winnerText}</div>
                ${winner ? `
                    <div class="victory-details">
                        ÂãùÂà©ÊñπÂºèÔºöÁ∏ΩËÉΩÂäõÂÄºÂÑ™Âã¢<br>
                        ${winner === 'A' ? `Â∞èÈöä #${selectedSquadA}` : `Â∞èÈöä #${selectedSquadB}`} 
                        ‰ª• ${Math.max(totalA, totalB)} ÈªûÊìäË¥•‰∫Ü ${Math.min(totalA, totalB)} Èªû
                    </div>
                ` : `
                    <div class="tie-details">
                        ÂÖ©ÈöäÂØ¶ÂäõÁõ∏Áï∂ÔºåÈÉΩÊìÅÊúâ ${totalA} ÈªûÁ∏ΩËÉΩÂäõÂÄºÔºÅ
                    </div>
                `}
            `;
            
            resultsContainer.appendChild(finalResult);
            resultsContainer.classList.add('active');
            
            // Á¶ÅÁî®Êà∞È¨•ÊåâÈàï
            const battleBtn = document.getElementById('arena-battle-btn');
            if (battleBtn) {
                battleBtn.disabled = true;
                battleBtn.textContent = 'Â∞çÊà∞Â∑≤ÂÆåÊàê';
            }
        }

        // ÈáçÁΩÆÁ´∂ÊäÄÂ†¥Êà∞È¨•
        function resetArenaBattle() {
            selectedSquadA = null;
            selectedSquadB = null;
            
            // Ê∏ÖÈô§ÈÅ∏ÊìáÁãÄÊÖã
            document.querySelectorAll('.squad-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // ÈáçÁΩÆÈ°ØÁ§∫
            const squadAName = document.getElementById('squad-a-name');
            const squadATotal = document.getElementById('squad-a-total');
            const squadBName = document.getElementById('squad-b-name');
            const squadBTotal = document.getElementById('squad-b-total');
            
            if (squadAName) squadAName.textContent = 'ÈÅ∏ÊìáÂ∞èÈöä A';
            if (squadATotal) squadATotal.textContent = 'Á∏ΩÈªûÊï∏: --';
            if (squadBName) squadBName.textContent = 'ÈÅ∏ÊìáÂ∞èÈöä B';
            if (squadBTotal) squadBTotal.textContent = 'Á∏ΩÈªûÊï∏: --';
            
            // ÈáçÁΩÆÊà∞È¨•ÊåâÈàï
            const battleBtn = document.getElementById('arena-battle-btn');
            if (battleBtn) {
                battleBtn.disabled = true;
                battleBtn.textContent = 'ÈñãÂßãÂ∞çÊà∞';
            }
            
            // Èö±ËóèÁµêÊûú
            const resultsContainer = document.getElementById('comparison-results');
            if (resultsContainer) {
                resultsContainer.classList.remove('active');
            }
        }
    </script>
</body>
</html>
